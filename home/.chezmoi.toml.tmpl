{{- $name := "yellow-seed" -}}
{{- $email := "42381113+yellow-seed@users.noreply.github.com" -}}

{{- /* Profile detection (common baseline, auto-detect work, env override) */ -}}
{{- $profile := "common" -}}
{{- $hostname := .chezmoi.hostname -}}
{{- $hostname_lower := lower $hostname -}}

{{- /* Auto-detect work environment based on hostname (explicit allowlist to avoid broad substring matches). */ -}}
{{- if ne $hostname_lower "" -}}
  {{- $workHostnames := list
        "work-laptop"
        "work-desktop"
        "corp-mac"
    -}}
  {{- range $i, $h := $workHostnames -}}
    {{- if eq $hostname_lower (lower $h) -}}
      {{- $profile = "work" -}}
    {{- end -}}
  {{- end -}}
{{- end -}}

{{- /* Allow manual profile override via environment variable */ -}}
{{- if env "DOTFILES_PROFILE" -}}
{{-   $profile = env "DOTFILES_PROFILE" -}}
{{- end -}}

[data]
    name = "{{ $name }}"
    email = "{{ $email }}"

    # Profile configuration (private or work)
    profile = "{{ $profile }}"

    # OS固有の設定
    # Note: これらのフラグは .chezmoi.os を直接使用することでも代替可能ですが、
    # 可読性とシンプルさのために提供しています
    {{- if eq .chezmoi.os "darwin" }}
    isMac = true
    {{- else }}
    isMac = false
    {{- end }}

    {{- if eq .chezmoi.os "linux" }}
    isLinux = true
    {{- else }}
    isLinux = false
    {{- end }}

[edit]
    command = "code"
    args = ["--wait"]
